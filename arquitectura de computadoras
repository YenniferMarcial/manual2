PRIMERO SE DIO A CONOCER EL PROBLEMA Y CON BASE A ESTO SE CREO UN PROGRAMA 
__CONFIG _CP_OFF &_WDT_OFF &_PWRTE_ON &_XT_OSC
 LIST P=PIC16F84A
 INCLUDE <P16F84A.INC>

ORG		0
GOTO	PRINCIPAL				;SALTO AL PROGRAMA PRINCIPAL AL RESETEAR

ORG		4
GOTO	IRQ						;SALTO A LA RUTINA DE INTERRUPCION 

;DEFINICION DE CONSTANTES 
 CUENTA	EQU	16					;VALOR DE CUENTA DEL TMR0 (256-140)
 RP2	EQU	7					;BITS DE LOS SEMAFOROS DE PEATONES 
 RP1	EQU	6
 VP2	EQU	1
 VP1	EQU	0

;DE CLARACION DE LA VARIABLE Y LAS POSICIONES DE MEMORIA 
 CONTADOR	EQU	0X10
 RETARDO	EQU	0X11

;*****************************************************************************************
;PROGRAMA PRINCIPAL 
;
;INICIALIZAR EL P16F84A, REGISTRO DE CONTROL 
;PROGRAMA Y LANZA EL TEMPORIZADOR PARA QUE SE ACTIVE LA INTERRUPCION 
;SE QUEDA EN ESPERA EN BUCLE INFINITO 
;

 PRINCIPAL:
			;SE INICIALIZARA EL PIC Y L PROGRAMA DE REGRISTRO 
			;BIT7 RPBU=1 RESIUSTENCIA DEL PULL-UP INTERNAS 
			;LAS CUALES NO SERA NESESARIO YA QUE SE DESHABILITARA 
			;SALIDA
;BIT6 INTEDG=0 DA LO MISMO PORQUE NO SE USARA INT
;BIT5 TOCS=0 TEMPORIZADOR DEL RELOJ INTERNO 
;BIT4 TOS=0 DA IGUAL 
;BIT3 PSA=0 PRE-ESCALA EL TMR0
;BIT2-0= 111 AJUSTA EL PRE-ESCALAR DEL TMR0 A 256
 MOVLW	B'10000111'				;PALABRA PARA OPTION HAY QUE MODIFICAR BITS 2-0
 BSF	STATUS,RP0				;BANCO 1
 MOVWF	OPTION_REG				;ESCRIBE LA PALABRA EN EL REGUISTRO F
 BCF	STATUS,RP0				;BANCO 0
;PROGRAMACION DE LOS PUERTOS 
;EL PORTB=SALIDAS= TODO A 0
;ESTRUCTURA DEL PORTB: 7	6	5	4	3	2	1	0
;					  RP2 RP2	R2	A2	V2	R1	A1	V1
;		                		  __^__		  __^__
;								    S2			S1
BSF		STATUS,RP0				;BANCO1
CLRF	TRISB					;BORRA TODOS LOS BITS 
CLRF	TRISA					;HACE LO MISMO  
BCF		STATUS,RP0				;BANCO0

;INICIALIZAR EL CONTADOR Y EL PUERTO 
CLRF	CONTADOR 				;PONER EL CONTADOR EN 0
MOVLW	B'10011110'				;S2 ROJO, S1 VERDE, PEATONES, ROJO PARA EL SEMAFORO S1
MOVWF	PORTB					;LO SACA DEL PUERTO 
BCF		PORTA,VP2				;ESTE EL SEMAFORO DE PEATONS, VERDE PARA EL S2
BSF		PORTA,VP1				;PEATONES, VERDE PARA S1UHIWAHIWH
;PROGRAMACION DEL TEMPOROSIDAOR 
MOVLW	CUENTA
MOVWF	TMR0					;LANZA LA CUENTA 

;PROGRAMACION DE LAS INTERRUPSIONES 
;BIT7	GIE=1 PARA HABILITAR LAS INTERRUPSIONES 
;BIT5	TOIE=1 PARA HABILITAR LA INTERRUPCIOND DEL TEMPORIZADOR 
;RESTO A 0 PARA SESHABILITAR LAS DEMAS INTERRUPCIONES 
MOVLW	B'10100000'
MOVWF	INTCON					;PROGRAMA LAS INTERRUPSIONES 

ESPERA:							;BUCLE INFINITO QUE BORRA CONTINUAMENTE EL PERRO GUSRDIAN 
		CLRWDT					;EL TRABAJO NNLO HACE LA IRQ. SOLO SI HAY ALGUN PROBLEMA, SE
GOTO ESPERA						;REINICIARA EL MICRO 

;************************************************************************
;RUTIAN DE ATENCION A LA INTERRUOCION DEL TEMPORIZADOR 
;
;LA INTERRUPCION SE PRODUCIRA CADA 0'05S.
;CONTAREMOS 5 LLAMADAS 
;SE INCREMENTARA UN CONTADOR DE SEGUNDOS PARA CONTRATARLO LA TEMOORIZASION 
;SE MODIFICA EL ESTADO DE LOS SEMAFOROS, ESCRIBIENDO EN EL PUERTO SEGUN EL TIEMPO PASADO 
;
;NO SE COMPRUEBA CUEL ES LA FUENTE DE INTERRUPCION, PORQUE SOLO ESTA HABILITADA 
;LA INTERRUPSION DEL TEMPORIZADOR.

IRQ:
		;EMPEZAMOS REPROGRAMANDO EL TEMPORIZADOR, PARA VAYA CONTANDO YA, Y NO INTRODICIR 
		;UN RETARDO EN LA TEMPORIXASION DEBIDO AL PROCESO DE VARIAS LINEAS DENCODIGO 
		MOVLW CUENTA
		MOVWF TMR0				;REPROGRAMACIO DEL TIMER 

		INCF	RETARDO 
		MOVLW	5
		SUBWF	RETARDO, W		;COMPRAR RETARDO CON 5
		BTFSS	STATUS,	Z		;SI NO ES 5
		GOTO	FINSWITCH		;SALTA AL FINAL DE LA RUTA DE INTERRPCION
		
		CLRF	RETARDO 
;ESTE CODIGO SE EJECUTARA CADA 0'5S EL CONTADOR CUENTA CADA MEDIO SEGUNDO 
		INCF	CONTADOR,F		;CONTADOR=CONTADOR+1
		
;IMPLEMENTACION DE LA SENTENCIA SWHITCH-CASE 
CASO20:
		MOVLW	40
		SUBWF	CONTADOR,W		;COMPARA CONTADOR CON 40
		BTFSC	STATUS,C		;ACARREO
		GOTO	FINCASO20		;NO HAY ACARREO => CONTADOR>=40

;CONTADOR<40 (NO HAY ACARREO)
		MOVLW	B'10011110'		;COCHES: S2 ROJO, S1 VERDE, PEATONES RP2 OFF, RP1 ON
		MOVWF	PORTB			;LO ESCRIBE EN EL PUERTO 
		BCF		PORTA,VP2		;PEATONES, VERDE PARA S2
		BSF		PORTA,VP1		;
		GOTO	FINSWITCH
 FINCASO20:

CASO25:							;CONTADOR<25?
		MOVLW	50
		SUBWF	CONTADOR,W		;COMPARA CONTADOR CON 50
		BTFSC	STATUS,C		;ACARREO 
		GOTO	FINCASO25		;NO HAY ACARREO =>CONTADOR >=50

;CONTADOR<30 (NO HAY ACRREO)
		MOVLW	B'10011110'		;COCHES: S2 ROJO, S1 VERDE, PEATONES: RP2 OFF, RP1 ON
		MOVWF	PORTB			;LO ESCRIBE EN EL PUERTO 
		BTFSC	CONTADOR,0		;SI CONTADOR PAR (1 SEGUNDO)
		GOTO	FINSWITCH
		MOVLW	B'10'			;MASCARA XOR PARA CINMUTAR VP2 SIN MODIFICAR EL RESTO 
		XORWF	PORTA,F			;CONMUTA VP2 (CADA 1S)
		GOTO	FINSWITCH		
 FINCASO25:

 CASO30:						;25>=CONTADOR<30
		MOVLW	60
		SUBWF	CONTADOR,W		;COMPARA CINTADOR CON 60 
		BTFSC	STATUS,C		;ACARREO
		GOTO	FINCASO30		;NO HAY ACARREO => CONTADOR>=60

;CONTADOR<30 (NO HAY ACARREO)
		MOVLW	B'00000010'		;MASCARA XOR PARA CONMUTAR S1.AMBAR SIN MODIFICAR EL RESTO
		XORWF	PORTB,F			;CONMUTA S1.AMBAR (CADA 0'5S DURANTE EL TIEMPO ENTRE 25 Y 30)
		BSF		PORTB,0			;APAGA S1.VERDE
		BTFSC	CONTADOR,0		;SI CONTADOR PAR (CADA SEGUNDO)
		GOTO	FINSWITCH
		MOVLW	B'10'			;MASCAR PARA VP2
		XORWF	PORTA,F			;CONMUTA VP2
		GOTO	FINSWITCH 
 FINCASO30:
 CASO50:						;30=CONTADOR<50
		MOVLW	100
		SUBWF	CONTADOR,W		;COMPARA CONTADOR CON 110
		BTFSC	STATUS,C		;ACARREO
		GOTO	FINCASO50		;NO HAY ACARREO => CONTADOR>=110
 ;CONTADOR 50 CUANDO NO HAY ACARREO
		MOVLW	B'01110011'		;COCHES: S2 VERDE, S1 ROJO. PEATONES:RP2 ON, RP1 OFF
		MOVWF	PORTB			;LO ESCRIBE EN EL PUERTO 
		BSF		PORTA,VP2		;PEATONES, VERDE PARA S1
		BCF		PORTA,VP1
		GOTO	FINSWITCH		
FINCASO50:
CASO55:							;30<=CONTADOR<55
		MOVLW	110
		SUBWF	CONTADOR,W		;COMPARA CONTADOR CON 110
		BTFSC	STATUS,C		;ACARREO
		GOTO	FINCASO55		;NO HAY ACARREO => CONTADOR>=110

;CONTADOR>55 (NO HAY ACARREO)
		MOVLW	B'01110011'		;S2 VERDE, S1 ROJO, PEATONES: RP2 ON, RP1 OFF
		MOVWF	PORTB			;LO ESCRIEB EN EL PUERTO 
		BTFSS	CONTADOR,0		;
		GOTO	FINSWITCH
		MOVLW	B'01'			;MASCARA XOR PARA CONMUTAR VP1 SIN MODIFICAREL RESTO 
		XORWF	PORTA,F			;CONMUTA VP1 (CADA 1S)
		GOTO	FINSWITCH
 FINCASO55:

CASO60:							;55<=contador<60
		MOVLW	120	
		SUBWF	CONTADOR,W		;COMPARA CONTADOR CON 120
		BTFSC	STATUS,C		;ACARREO
		GOTO	FINCASO60		;NO HAY ACARREO => CONTADOR>=120

;CONTADOR<60 (NO HAY ACARREO)
		MOVLW	B'00010000'		;MASCARA XOR PARA CONMUTAR S2.AMBAR SIN MODIFICAR EL RESTO 
		BTFSS	CONTADOR,0		;SI CONTADOR POR CADA SEGUNDO 
		BSF		W,VP1			;ACTIVA LA MASCARA PARA CP1
		XORWF	PORTB,F			;CONMUTA S2.AMBAR 
		BSF		PORTB,3			;APAGA S2 VERDE 
		BTFSC	CONTADOR,0		;SI CONTADOR POR CADA SEGUNDO 
		GOTO	FINSWITCH
		MOVLW	B'01'			;MASCARA PARA VP1
		XORWF	PORTA,F			;CONMUTA VP1
		GOTO	FINSWITCH	

 FINCASO60:
	
 OTHERWISE:						;LLEGO A 60
		MOVLW	B'10011110'		;COCHES: S2 ROJO, S1 VERDE, PEATONES: E¿RP2 OFF, RP1ON
		MOVWF	PORTB			;LA ESCRIBE EN EL PUERTO 
		BCF		PORTA,VP2		;PEATONES VERDE PARA S2
		BSF		PORTA,VP1		;
		CLRF	CONTADOR		;EMPIEZA EL CICLO DE NUEVO 

 FINSWITCH:						;FIN DE LA SENTENCIA SWICH-CASE 
 MOVLW	B'10100000'		
 MOVWF	INTCON
 RETFIE					;RETORNO DE INTERRUPCION
 
 END


Se hizo un prototipo en proteus de tal manera que supiéramos en donde iban los cables conectados con los del pic y en caso de no quedaran se tenían que volver a cargar, también se le pasó el código anterior al pic.
El pic es PIC16F84A.

Ya en caso de tener errores se corrigieron hasta que los leds se prendieran y que cada led cambiara según el tiempo, en este caso cada 30 segundos.
Después se cortron los cables en donde la patita corta era negativa y se soldo con el led y la patita larga era para la resistencia de 180v, en donde este era el negativo y también se le añadió un pedazo de cable en donde este era en positivo 
Despues se soldo cada uno de los leds con sus resistencias, pero tambien se le agrego cinta de aislar para que este se protegiera. 
Luego de esto se construyo las bases de los semaforos y tambien la base de la maqueta para que pudiera tener soporte y asi poder proteger la tabla proto y el cable.
Se unieron los semaforos y sus bases de tal manera que fuera rojo, amarillo, verde.
En el caso de los peatones era primero rojo y luego verde. 
Se probaron que los leds prendieran al mismo tiempo que los peatones y los semaforos, es decir, que tuviera logica. 
Los cables de los semaforos y peatones finalmente se unen a la tabla proto y asi se conectaron a la luz para poder revisar que todos prendieran correctamente
Ya finalmente solo se unieron las cosas de la maqueta y se agregó un cable que ira conectado a la luz para que prendan 
